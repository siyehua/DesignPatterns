# 迭代器与组合模式
这章篇幅比较长,但是是因为两个模式一起讲解.模式本身并不难理解.

模式|描述
---|---
策略|封装可以互换的行为,并使用委托决定使用哪一个
适配器|改变一个或多个类的接口
迭代器|提供一个方式来遍历集合,而无需暴露集合的实现
外观|简化一群类的接口
组合|客户可以将对象的集合以及个别的对象一视同仁
观察者|当某个状态改变时,允许一群对象能够被通知到.


## 迭代器模式
迭代器模式提供一种方法顺序访问一个聚合对象中的各个元素,而又不暴露其内部的表示.

![Class Graph](/code/src/main/java/com/siyehua/chapter9/chapter9_001.jpg)

### Java/Android应用
Java的Collection集合都使用了迭代器模式,并且可以使用foreach循环.


## 组合模式
允许你将对象组成树形结构来表现"整体/部分"的层次结构.组合能让客户以一致的方式处理个别对象和对象组合.

组合模式破坏了"一个类,一个责任"的原则.组合模式用单一原则换取了透明性.
透明性:通过让组件的接口同事包含一些管理子节点和叶节点的操作,客户就可以将组合和叶节点一视同仁.

也就是说,一个元素究竟是组合还是叶节点,对客户来说都是透明的,客户无需关心.

如果要保持单一性,就必须设计成两个接口,每次执行都让用户去判断属于哪种类型.

这是一个很典型的折中案例.



![Class Graph](/code/src/main/java/com/siyehua/chapter9/chapter9_002.jpg)

### Java/Android应用
Android中的View与ViewGroup使用了组合模式.ViewGroup中也有View,但是View中的某些操作其实并不适合ViewGroup,反之亦然.

例如ListView作为一个ViewGroup,并不支持setOnClickListener,它只只是对它的Item进行监听操作.

## 要点
 * 迭代器允许访问聚合的元素,而不许哭暴露它的内部结构.
 * 迭代器提供了一个通用的接口,让我们遍历聚合的项,当我们变M码使用聚合的项时,就可以使用多态机制.
 * 我们应该努力让一个类只分配一个责任.(类应该只有一个改变的理由)
 * 在实现组合模式时,有许多设计上的折中.你要根据需要平衡透明性和安全性.
 * 把游走的任务放在迭代器上,而不是聚合上.这样简化了聚合的接口和实现,也让责任各得其所.
 * 类的每个自认都有改变的潜在区域.超过一个责任,意味着超过一个改变区域.
